<html>
<head>
    <title>Order - Best Harvest Kitchen</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="../../js/cart.js"></script>
    <link rel="stylesheet" href="../../css/styles.css">

</head>
<body>
    <div class="header">
        <h1>UH Dining | Sugarland</h1>
        <nav class="navbar">
          <ul>
            <li><a href="../index.html">Home</a></li>
            <li class="dropdown">
              <a href="#">Menu</a>
              <div class="dropdown-content">
                <a href="sprice-symph-grill-order.html">Spice Symphony Grill</a>
                <a href="urban-spoon-order.html">Urban Spoon</a>
                <a href="the-palate-pavillion-order.html">The Patate Pavillion</a>
                <a href="ember-and-sage-order.html">Ember and Sage</a>
                <a href="best-harvest-kitchen-order.html">Best Harvest Kitchen</a>
                <a href="fusion-heat-order.html">Fusion Heat</a>
              </div>
            </li>
            <li class="dropdown">
              <a href="#">Hours and Location</a>
              <div class="dropdown-content">
                <a href="../Hours-and-Location.html">Hours and Map</a>
                <a href="#">Holiday Hours</a>
              </div>
            </li>
            <li class="dropdown">
              <a href="#">Food Insecurity</a>
              <div class="dropdown-content">
                <a href="https://uh.edu/csac/cougar-cupboard/">Cougar Cupboard</a>
              </div>
            </li>
            <li class="dropdown">
              <a href="#">About Us</a>
              <div class="dropdown-content">
                <a href="#">Mission</a>
                <a href="#">Careers</a>
                <a href="#">Sustainability</a>
              </div>
            </li>
            <li class="dropdown">
              <a href="#">More</a>
              <div class="dropdown-content">
                <a href="https://dineoncampus.com/uh/meal-plan-eligibility">Meal Plans</a>
                <a href="https://www.uh.edu/af-university-services/cougarcard/">Cougar Cards</a>
                <a href="#">Printable Materials</a>
              </div>
            </li>
          </ul>
        </nav>
    </div>
    <h1>Best Harvest Kitchen</h1>
    <div class="row">
        <div class="col-4">
            <div class="container">
                <h2>Cart</h2>
                <strong>Order</strong>
                <ul id="cartItems"></ul>
                <p id="totalAmount">Total:</p>
                <p id="totalMealSwipes">Total Meal Swipes:</p>
            </div>
        </div>
        <div class="col-8">
            <div class="container">
                <h2>Menu</h2>
                <form id="orderForm" action="/order" method="POST">
                    <table>
                        <tr>
                            <th class="col-7">Food Item</th>
                            <th class="col-2">Price</th>
                            <th class="col-2">Meal Swipes</th>
                            <th class="col-1">Quantity</th>
                        </tr>
                        <tr>
                            <td>Quinoa Stuffed Bell Peppers</td>
                            <td>$8.99</td>
                            <td>1</td>
                            <td>
                                <input type="number" id="quantityPeppers" class="quantity-input" data-item="Quinoa Stuffed Bell Peppers" min="0" value="0">
                            </td>
                        </tr>
                        <tr>
                            <td>Chickpea Curry Bowl</td>
                            <td>$7.99</td>
                            <td>1</td>
                            <td>
                                <input type="number" id="quantityBowl" class="quantity-input" data-item="Chickpea Curry Bowl" min="0" value="0">
                            </td>
                        </tr>
                        <tr>
                            <td>Eggplant Parmesan</td>
                            <td>$5.99</td>
                            <td>1</td>
                            <td>
                                <input type="number" id="quantityParmesan" class="quantity-input" data-item="Eggplant Parmesan" min="0" value="0">
                            </td>
                        </tr>
                        <tr>
                            <td>Roasted Vegetable Tart</td>
                            <td>$5.99</td>
                            <td>1</td>
                            <td>
                                <input type="number" id="quantityTart" class="quantity-input" data-item="Roasted Vegetable Tart" min="0" value="0">
                            </td>
                        </tr>
                    </table>
                    <div>
                        <label for="cardPayment">Card</label>
                        <input type="radio" id="cardPayment" name="paymentMethod" value="card">
                        <label for="mealSwipePayment">Meal Swipes</label>
                        <input type="radio" id="mealSwipePayment" name="paymentMethod" value="mealSwipe">
                    </div>
                </form>
                <button onclick="submitOrder();">Submit Order</button>
            </div>
        </div>
    </div>
    <script>
        // function submitForm(){
        //     alert('Order Accepted!');
        //     document.getElementById("orderForm").reset();
        //     return false;
        // }
        function submitOrder(event) {
            event.preventDefault(); // Prevent default form submission

            // Collect form data
            const orderData = {
                'Quinoa Stuffed Bell Peppers': parseInt(document.getElementById('quantityPeppers').value),
                'Chickpea Curry Bowl': parseInt(document.getElementById('quantityBowl').value),
                'Eggplant Parmesan': parseInt(document.getElementById('quantityParmesan').value),
                'Roasted Vegetable Tart': parseInt(document.getElementById('quantityTart').value)
            };

            // Send POST request to server
            fetch('/order', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(orderData)
            })
            .then(response => response.text())
            .then(data => {
                alert(data); // Display the response from the server
                document.getElementById("orderForm").reset(); // Reset the form
            })
            .catch(error => {
                console.error('Error:', error); // Log any errors
            });
        }
    </script>
    <script src="../../js/server.js"></script>
</body>
</html>
